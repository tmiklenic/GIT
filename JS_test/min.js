const searchTerm=document.querySelector("#searchTerm"),searchButton=document.querySelector(".search"),tbody=document.querySelector("#results tbody"),loader=document.querySelector("#loading"),noResultsMessage="----- Nema rezultata za ovaj upit ili je upit prazan! -----",row=document.createElement("tr"),emptyCell=document.createElement("td");function mock(){return new Promise(e=>setTimeout(()=>e({json:()=>Promise.resolve([1,2,3])}),500))}function getDisplayValue(e){return void 0===e?(console.log("undefined"),"-"):null===e?(console.log("null "),"-"):e}function getGenresDisplayValue(e){var t="";return(e.forEach(e=>{t=""==t?e:t+", "+e}),""!=t)?t:"-"}function displayLoading(){loader.classList.add("display"),setTimeout(()=>{loader.classList.remove("display")},5e3)}function hideLoading(){loader.classList.remove("display")}emptyCell.innerText=noResultsMessage,row.appendChild(emptyCell),tbody.appendChild(row),searchTerm.addEventListener("input",async e=>{var t,a="https://api.tvmaze.com/search/shows?q="+searchTerm.value;displayLoading();let l=await fetch(a);await mock();let n=await l.json();if(hideLoading(),tbody.innerHTML="",0!=n.length)n.forEach(e=>{let t=document.createElement("tr"),a=document.createElement("td");a.innerText=getDisplayValue(e.show.name),t.appendChild(a);let l=document.createElement("td");l.innerText=getDisplayValue(e.show.rating.average),t.appendChild(l);let n=document.createElement("td");n.innerText=getGenresDisplayValue(e.show.genres),t.appendChild(n);let r=document.createElement("td");r.innerText=getDisplayValue(e.show.summary),t.appendChild(r),tbody.appendChild(t)});else{let r=document.createElement("tr"),s=document.createElement("td");s.innerText=noResultsMessage,r.appendChild(s),tbody.appendChild(r)}});
